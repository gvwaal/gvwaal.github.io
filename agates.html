<!doctype html>
<html>
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108391082-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-108391082-1');
        </script>

        <html lang="en-US">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <meta name="description" content="Gerrit VanderWaal: Geology. GIS. Web mapping. Python. Cooking. Sushi.">
        <title>Optimal Shore-based Agate Picking Areas of NE MN</title>

        <link rel="stylesheet" href="assets/css/style.css?v=">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <meta name="viewport" content="width=device-width, initial-scale=0">
        <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>

    <body>
    <div class="wrapper">
        <header>
            <h1><a href="http://vwaal.com" style="color:#222;">Gerrit VanderWaal</a></h1>
            <p>I'm a recent graduate with background in economic geology and GIS, with a strong interest in Python and web mapping technologies.</p>
            <p>In my free time I enjoy reading about mining and economic geology, biking, and making locations accessible via Google Maps' Photo Sphere feature.</p>
            <a href="mailto:gerrit.vwaal@gmail.com">email</a><br>
            <a href="https://www.linkedin.com/in/gvwaal">linkedin</a><br>
            <a href="https://github.com/gvwaal">github</a><br>
            <a href="https://twitter.com/gvwaal">twitter</a><br>
        </header>
      
        <section>
        <!-- any future site content goes here -->
        <h1 id="top">Optimal Shore-based Agate Picking Areas of Minnesota's North Shore</h1>
        
        <ol>
            <li><a href="#background">Background</a></li>
            <li><a href="#processing">Processing</a></li>
            <ul>
                <li><a href="#proc_bedrock">Bedrock quadrangles</a></li>
                <li><a href="#proc_dems">Digital Elevation Models</a></li>
                <li><a href="#proc_outline">Lake Superior shoreline</a></li>
                <li><a href="#proc_snas">Scientific and Natural Areas</a></li>
                <li><a href="#proc_parks">State parks</a></li>
                <li><a href="#proc_roads">Roads</a></li>
                <li><a href="#proc_gpr">Grand Portage Reservation border</a></li>
            </ul>
            <li><a href="#assumptions">Assumptions</a>
            <li><a href="#results">Results</a></li>
            <li><a href="#data">Data sources</a></li>
        </ol>
        
        <h2 id="background">Background</h2>
        <p>
            The Lake Superior agate is a semiprecious gemstone characterized by red, orange, yellow, white or translucent bands of chalcedony with variable amounts of coarse-grained quartz crystals. Around 1.1 billion years ago, flood basalts associated with the Midcontinent Rift quickly erupted forming vesicles in the lava. As time passed, siliceous fluids percolated through the rock, filling the vesicles with the concentric bands of chalcedony. Over time the weathering-resistant agates were released from their host rock and distributed throughout the Lake Superior basin. <a href="https://web.archive.org/web/20171021190641/https://www.carleton.edu/departments/geol/resources/comps/compspdffiles/2005/beaster2005.pdf">Beaster (2005)</a> provides a good summary of these gems.
        </p>
        
        <figure>
            <img src="assets/images/agates.jpg" alt="A variety of Lake Superior agate specimens. Samples with and without coarse-grained quartz present."><br>
            <figcaption><small>A variety of Lake Superior agate specimens, <a href="https://www.flickr.com/photos/43021860@N00/34182938466/">by Tim</a>.</small></figcaption>
        </figure>
        
        <p>
            Minnesota's North Shore (NS) is a frequent destination for those in search of agates. Having lived in Duluth, MN for around five years, a frequent question from visiting friends and family is "Where are the best places to look for agates?" The answer to their question is gravel pits, but these often do not make for the most scenic destinations. This project identifies the best locations for agate picking on the North Shore from a quantitative perspective,
            using ArcMap 10.4, its Spatial Analyst license, and Python to work with <a href="https://en.wikipedia.org/wiki/Raster_graphics">raster</a>
            data. <!-- please make this better -->
        </p>
        
        <h2 id="assumptions">Assumptions</h2>
        <p>
            <ol>
                <li>Beach formation, and therefore agate deposition, will occur on low-angle slopes, such as 30(find degree symbol at some point) and below. slopes of repose indicate angle of at least 30 for gravel</li>
                <li>The most agates will be located closest to the lake (within 10m), since only the strongest (and therefore least common) wave action will be able to move agates inland.</li>
                <li>The locations with the most agates will be those least visited by humans, and therefore most distant from roads.</li>
            </ol>
        </p>
        
        <h2 id="processing">Processing</h2> <!--make sure python commands are syntactically correct-->
            <h3 id="proc_bedrock">Bedrock quadrangles</h3>
            <p>
                Of the 16 quadrangles gathered for use in this project, 11 were in legacy GIS formats (seven of which
                required <a href="http://support.esri.com/en/technical-article/000004705">conversion</a> from ArcInfo Interchange
                to a coverage), three had modern GIS formats, and two were scanned PDFs converted to .tif for use in ArcMap
                <!--PDFToTIFF_conversion ("map_pdf", "map_tif", , , , , 650, "RGP_PALETTE", "NONE", )-->. All files were
                imported into a geodatabase to ensure compatability (coverages do not work with Polygon to Raster).
            </p>
            
            <p>
                The bedrock feature classes were converted to rasters using <code title="PolygonToRaster_conversion (&quot;bedrock_fc&quot;, &quot;<geologic unit code on map>&quot;, &quot;bedrock_rast&quot;, , , 1)">Polygon to Raster</code><!--PolygonToRaster_conversion ("bedrock_fc", "<geologic unit code on map>", "bedrock_rast", , , 1)-->. A field was added as a means of weighting to denote whether the rock was suitable as an agate host, following information from <!-- find that thesis from gustavus(?)-->.
            </p>
            
            <p>
                The map .tif were georeferenced using the MCIS with 
            </p><!--finish if you can figure out how to re-rasterize them-->
            
        <h3 id="proc_dems">Digital Elevation Models</h3>
            <p>
                A <a href="https://github.com/gvwaal/misc-scripts/blob/master/dem_fetch.py">Python script</a> was created
                to quickly download around 180 1-meter DEM tiles needed to cover the NS. While the Minnesota Department of
                Natural Resources (MnDNR)'s <a href="http://www.dnr.state.mn.us/maps/mntopo/index.html">MnTOPO application</a>
                allows the user to download elevation data clipped from a user-created polygon, I found that drawing a single
                non-overlapping polygon at sufficient scale covering the entire NS was too time consuming.
            </p>
            
            <p>
                The tiles were then merged together using <a href="https://github.com/gvwaal/misc-scripts/blob/master/mosaic.py">a different script</a>
                to save time. A slope raster was created from this data using the <code title="Slope(&quot;dem_1m_mn&quot;, &quot;DEGREE&quot;,)">Slope</code> tool and the result was converted from a floating point raster to an integer raster using the <code title="RasterCalculator (Int(&quot;slope_rast&quot; + 0.5,&quot;slope_rast&quot;,), &quot;slope_rast_int&quot;)">Raster Calculator</code> tool.
                The Reclassify <!--# Replace a layer/table view name with a path to a dataset (which can be a layer file) or create the layer/table view within the script
# The following inputs are layers or table views: "weighted raster components\slope_1m_int"
arcpy.gp.Reclassify_sa("weighted raster components\slope_1m_int", "Value", "0 10 3;10 20 6;20 30 9;30 40 9;40 50 6;50 60 1;60 70 1;70 80 1;80 90 1", "C:/Users/Gerrit/GIS/optimal_agate_picking/wr_components.gdb/slope_reclass_final", "DATA")-->tool was used to change the cell values to desired weights (note: this can also be done in
                the Weighted Overlay tool).
            </p>
            
            <h3 id="proc_outline">Lake Superior shoreline</h3>
            <p>
                The Euclidean Distance tool provides an easy way to get a "raster Buffer" to assess proximity to shoreline.
                Unfortunately, this layer was deemed unsuitable due to low resolution. <!--image to illustrate-->
            </p>
            
            <p>
                A higher resolution shoreline was created by using the Con tool to divide the slope raster into two
                values: 0 and not 0 <!--RasterCalculator (Con("slope_rast" > 0,1,0), "LS_shore_rast")-->. The product
                raster was converted into a polygon <!--RasterToPolygon_conversion("slope_float",
                "LS_shore_poly", "SIMPLIFY", "VALUE")--> and all polygons not the Lake Superior shoreline were deleted
                using the Editor toolbar. Euclidean Distance <!--EucDistance ("LS_shore_poly", 100, 1, "LS_shore_euc")-->
                was used to create cells whose values denoted distance from the polygon, Reclassified <!--# Replace a layer/table view name with a path to a dataset (which can be a layer file) or create the layer/table view within the script
# The following inputs are layers or table views: "weighted raster components\Buffers\LS_border_rast_int"
arcpy.gp.Reclassify_sa("weighted raster components\Buffers\LS_border_rast_int", "Value", "0 1 9;1 5 8;5 10 6;10 25 4;25 50 2;50 100 1", "C:/Users/Gerrit/GIS/optimal_agate_picking/wr_components.gdb/LS_border_reclass", "DATA")-->to desired weights,
                and converted to an integer raster.
            </p><!--make sure this paragraph is logically consistent-->
            
            <h3 id="proc_snas">Scientific and Natural Areas</h3>
            <p>
                The Scientific and Natural Areas that had some portion of the NS within their borders were exported to a new feature class. <code title="PolygonToRaster_conversion (&quot;SNAs_shp&quot;, &quot;&lt;field with value shared by all polygons, e.g. 'MN'&gt;&quot;, &quot;SNAs_rast&quot;, &quot;MAXIMUM_AREA&quot;, ,1)">Polygon to Raster</code> was then used to convert these areas to rasters for use in the Weighted Overlay tool. The remaining
                polygons were rasterized for use in the Weighted Overlay tool.
            </p>
            
            <h3 id="proc_parks">State parks</h3>
            <p>
                Processing similar to SNAs<!--PolygonToRaster_conversion ("SPs_shp", "<field with value shared by all polygons, e.g. "MN">", "SPs_rast", "MAXIMUM_AREA", , 1)-->.
            </p>
            
            <h3 id="proc_roads">Roads</h3>
            <p>
                Euclidean Distance was used to get a 2,000m raster, which was then clipped using the polygon of Lake Superior to save space. The result was converted to an integer raster and reclassified <!--# Replace a layer/table view name with a path to a dataset (which can be a layer file) or create the layer/table view within the script
# The following inputs are layers or table views: "Road_dist_int_16bit"
arcpy.gp.Reclassify_sa("Road_dist_int_16bit", "Value", "0 157 1;157 354 2;354 571 3;571 797 4;797 1028 5;1028 1262 6;1262 1501 7;1501 1746 8;1746 2000 9", "C:/Users/Gerrit/GIS/optimal_agate_picking/wr_components.gdb/Reclass_dist_jenks", "DATA")-->for use in Weighted Overlay.
            </p>
            
            <h3 id="proc_gpr">Grand Portage Reservation border</h3>
            <p>
                It was surprisingly challenging to find open, recently created GIS data for the GPR (or any reservation, for
                that matter). I was expecting to find something on the Minnesota Geospatial Commons (MGC), a different state
                government website, or even the GPR website, but I had to settle for an image of a map created in 2012 by
                Andrew Munsch of deadpioneer.com. Google Maps has a similar border on their map.
            </p>
            
            <!-- <p>The image was georeferenced using MCIS as a reference. Seven <a href="assets/gis/agates/gpr_points.txt">control points</a> were used with the 1st Order Polynomial (Affine) transformation. For the portion of the reservation that consisted of the state border, a state outline was found on the MGC and was traced with the Editor toolbar. The portion of the reservation within Cook County was traced using the georeferenced map as a reference.</p> -->

        <h2 id="results">Results</h2>
        
        <h2 id="data">Data sources</h2>
        <p>
            This project relied primarily on data created and hosted by the State of Minnesota and the Minnesota Geological
            Survey (MGS), with a small contribution from third parties
        </p>
        
        <!-- <summary>/<detail> toggle: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details -->
        <p>
            <details>
                <summary>State data</summary>
                <a href="ftp://ftp.lmic.state.mn.us/pub/data/elevation/lidar/">Digital Elevation Models (DEMs)</a> - slope<br>
                <a href="https://gisdata.mn.gov/dataset/water-lake-superior-basin">Lake Superior outline</a> - proximity to shoreline<br>
                <a href="http://www.mngeo.state.mn.us/chouse/wms/composite_image.html">Minnesota Composite Image Service (MCIS)</a> - reference for georeferencing<br>
                <a href="https://gisdata.mn.gov/dataset/bdry-scientific-and-nat-areas">Scientific and Natural Areas (SNAs)</a> - prohibited areas<br>
                <a href="https://gisdata.mn.gov/dataset/bdry-dnr-lrs-prk">State Parks</a> - prohibited areas<br>
                <a href="https://gisdata.mn.gov/dataset/trans-roads-mndot-tis">Roads</a> - distance from roads<br>
            </details>
            
            <details>
                <summary>MGS data</summary>
                <a href="http://hdl.handle.net/11299/60004">M-065: Silver Bay and Split Rock Point NE</a><br>
                <a href="http://hdl.handle.net/11299/60005">M-066: Illgen City</a><br>
                <a href="http://hdl.handle.net/11299/712">M-128: French River and Lakewood</a><br>
                <a href="http://hdl.handle.net/11299/317">M-129: Knife River</a><br>
                <a href="http://hdl.handle.net/11299/406">M-139: Two Harbors</a><br>
                <a href="http://hdl.handle.net/11299/290">M-140: Castle Danger</a><br>
                <a href="http://hdl.handle.net/11299/57440">M-147: Split Rock Point</a><br>
                <a href="http://hdl.handle.net/11299/58167">M-170: Schroeder</a><br>
                <a href="http://hdl.handle.net/11299/58168">M-171: Tofte</a><br>
                <a href="http://hdl.handle.net/11299/58169">M-172: Little Marais</a><br>
                <a href="http://hdl.handle.net/11299/58171">M-174: Lutsen</a><br>
                <a href="http://hdl.handle.net/11299/58221">M-179: Deer Yard Lake and Good Harbor Bay</a><br>
                <a href="http://hdl.handle.net/11299/58225">M-182: Duluth</a><br>
                <a href="http://hdl.handle.net/11299/101646">M-189: Grand Marais</a><br>
                <a href="http://hdl.handle.net/11299/115932">M-190: Kadunce River</a><br>
                <a href="http://hdl.handle.net/11299/159554">M-195: Marr Island and Hovland</a><br>
            </details>
            
            <details>
                <summary>Third party data</summary>
                <a href="http://www.deadpioneer.com/routes/US61/historicus61se/mineralcenter/mineralcentercontext.jpg">Grand Portage Reservation (GPR ) border</a> - prohibited areas/georeferencing reference<br>
            </details>
        </p>
        </section>

        <footer>
        <p><small>Theme from <a href="https://github.com/orderedlist/minimal">Minimal</a></small></p>
        </footer>
        
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    </body>
</html>